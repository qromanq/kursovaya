# Диаграмма классов и ER-диаграмма системы

Диаграмма классов, показанная на рисунке 1, отражает основные сущности системы управления складскими запасами, их атрибуты, методы и связи между ними. Она обеспечивает структурное представление системы и помогает понять, как объекты взаимодействуют и какие данные хранятся в системе. Диаграмма классов является важным инструментом проектирования, который позволяет визуализировать объектно-ориентированную структуру приложения и служит основой для последующей реализации кода.

Основные классы системы включают Product, Supplier и Transaction, которые представляют ключевые сущности предметной области. Класс Product описывает товары на складе и содержит атрибуты id для уникальной идентификации, name для названия товара, manufacturer для производителя, sku для артикула товара, price для цены единицы, totalQuantity для общего количества единиц на складе, availableQuantity для количества доступных для отгрузки единиц, а также коллекцию transactions для связи с операциями данного товара. Методы класса включают isAvailable для проверки наличия доступных единиц, decreaseAvailableQuantity для уменьшения доступного количества при отгрузке, increaseAvailableQuantity для увеличения при поступлении, а также стандартные геттеры и сеттеры для доступа к полям. Класс Product является центральной сущностью системы, представляющей складской каталог.

Класс Supplier представляет зарегистрированных поставщиков склада и содержит атрибуты id для уникальной идентификации, companyName для наименования компании, contactInfo для контактной информации, partnerCode для уникального кода партнёра, а также коллекцию transactions для связи с операциями данного поставщика. Методы класса включают getActiveTransactions для получения списка активных поставок, getActiveTransactionCount для подсчёта количества активных операций, а также стандартные геттеры и сеттеры для доступа к полям. Класс Supplier обеспечивает учёт поставщиков и позволяет контролировать их активность на складе.

Класс Transaction представляет операцию поступления товара от поставщика и содержит атрибуты id для уникальной идентификации, product для связи с поступившим товаром, supplier для связи с поставщиком, transactionDate для даты поступления, expiryDate для срока реализации, shipmentDate для фактической даты отгрузки, а также shipped для статуса отгрузки товара. Методы класса включают isExpired для проверки просрочки реализации, getExpiredDays для расчёта количества дней просрочки, shipProduct для регистрации отгрузки с автоматическим обновлением доступного количества товара, а также стандартные геттеры и сеттеры. Класс Transaction обеспечивает связь между товарами и поставщиками и содержит всю информацию о процессе поступления и отгрузки продукции.

Помимо классов модели данных, диаграмма классов включает классы сервисного слоя ProductService, SupplierService и TransactionService, которые содержат бизнес-логику приложения. Класс ProductService предоставляет методы save для сохранения нового товара с валидацией данных, updateProduct для обновления информации о существующем товаре, deleteById для удаления товара из каталога, findById для поиска товара по идентификатору, findAll для получения списка всех товаров и searchProducts для поиска товаров по названию, производителю или артикулу. Класс SupplierService реализует методы save для регистрации нового поставщика с генерацией кода партнёра, updateSupplier для обновления данных поставщика, deleteById для удаления поставщика, findById для поиска по идентификатору, findAll для получения списка всех поставщиков и findByPartnerCode для поиска по коду партнёра. Класс TransactionService обеспечивает методы receiveProduct для оформления поступления товара с проверкой данных, shipProduct для регистрации отгрузки с расчётом остатков, findActiveTransactions для получения списка активных операций, findExpiredTransactions для получения просроченных поставок и findTransactionsBySupplier для получения истории операций конкретного поставщика.

Диаграмма классов также включает классы контроллеров ProductController, SupplierController и TransactionController, которые обрабатывают HTTP-запросы и вызывают методы сервисного слоя, классы репозиториев ProductRepository, SupplierRepository и TransactionRepository, которые обеспечивают доступ к данным через Spring Data JPA с автоматической генерацией запросов на основе имён методов, а также класс ReportsController для формирования сводных отчётов и статистики о состоянии складских запасов.

Связи между классами определяются следующим образом. Связь Product и Transaction имеет тип ассоциация один ко многим, где один товар может участвовать во множестве операций, при этом операции существуют независимо от товара и связаны через поле product. Связь Supplier и Transaction также имеет тип ассоциация один ко многим, где один поставщик может иметь множество операций, связанных через поле supplier. Связь Transaction с Product и Supplier имеет тип композиция, поскольку операция не может существовать без товара и поставщика, и при удалении операции связи с товаром и поставщиком разрываются. Связь между сервисными классами и классами модели данных имеет тип зависимость, поскольку сервисы используют классы модели для выполнения операций, но не владеют ими.

ER-диаграмма, показанная на рисунке 2, является схемой, которая показывает, как данные организованы в базе данных и как они связаны между собой. Она состоит из сущностей, их атрибутов и связей между ними. Сущности представляют объекты или категории данных, которые нужно хранить, например товары, поставщики или операции. Атрибуты описывают свойства этих сущностей, такие как название товара, наименование поставщика или дата поступления. Связи показывают, как сущности взаимодействуют друг с другом, например один товар может поступать множество раз, а один поставщик может иметь несколько активных поставок. Основная цель ER-диаграммы заключается в наглядном отображении структуры данных и их взаимосвязей для правильного проектирования базы данных и последующей реализации системы.

Рис 2. ER-диаграмма базы данных системы управления складскими запасами

Сущность products содержит атрибуты id как уникальный идентификатор товара и первичный ключ, name как название товара, manufacturer для производителя, sku для артикула товара с ограничением уникальности, price для цены единицы, total_quantity для общего количества единиц на складе и available_quantity для количества доступных единиц. Сущность products содержит информацию обо всех товарах в складском каталоге и является центральной таблицей для учёта запасов.

Сущность suppliers содержит атрибуты id как уникальный идентификатор поставщика и первичный ключ, company_name для наименования компании, contact_info для контактной информации и partner_code для уникального кода партнёра с ограничением уникальности. Сущность suppliers хранит информацию обо всех зарегистрированных поставщиках склада и обеспечивает возможность идентификации партнёров при поступлении товаров.

Сущность transactions содержит атрибуты id как уникальный идентификатор операции и первичный ключ, product_id как внешний ключ, ссылающийся на products.id, supplier_id как внешний ключ, ссылающийся на suppliers.id, transaction_date для даты поступления товара, expiry_date для срока реализации, shipment_date для фактической даты отгрузки, а также shipped для логического статуса отгрузки товара. Сущность transactions связывает товары и поставщиков и содержит всю информацию о процессе поступления и отгрузки продукции.

Связи между сущностями определяются следующим образом. Связь products и transactions имеет тип один ко многим, где один товар может участвовать во множестве операций, реализованная через внешний ключ product_id в таблице transactions. Связь suppliers и transactions также имеет тип один ко многим, где один поставщик может иметь множество операций, реализованная через внешний ключ supplier_id в таблице transactions. Для обеспечения целостности данных установлены ограничения внешних ключей с каскадным удалением, а также ограничения уникальности для полей sku в таблице products и partner_code в таблице suppliers для предотвращения создания дубликатов записей.

Разработанные диаграммы классов UML и ER-диаграмма обеспечивают полное понимание структуры данных и архитектуры приложения, служат основой для реализации кода и создания базы данных, а также позволяют выявить возможные проблемы проектирования на ранних этапах разработки.